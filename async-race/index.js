(()=>{"use strict";var e={491:(e,n,t)=>{t.d(n,{Z:()=>u});var r=t(645),i=t.n(r),a=t(667),o=t.n(a),s=t(3),c=i()((function(e){return e[1]})),d=o()(s);c.push([e.id,".car-content {\n    padding-bottom: 10px;\n}\n\n.icon-car { \n    width: 100px; \n    height: 40px;\n    margin-bottom: -15px;\n    align-self: flex-end;\n  }\n\n.car-menu {\n    display: flex;\n    align-items: center;\n    column-gap: 5px;\n}\n\n.car-manage {\n    display: flex;\n    align-items: center;\n    column-gap: 5px;\n    border-bottom: 2px dashed #FFFFFF;\n}\n\n.start, .stop {\n    width: auto;\n    align-self: center;\n    font-size: 13px;\n}\n\n.flag-container {\n    width: 30px;\n    height: 40px;\n    background-image: url("+d+");\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    margin-left: auto;\n    margin-right: 100px;\n}\n",""]);const u=c},219:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(645),i=t.n(r)()((function(e){return e[1]}));i.push([e.id,"#navigation, .garage-menu {\n    padding-bottom: 10px;\n}\n\n.hidden-page {\n    display: none;\n}\n\n.create-container, .update-container, .manage-container {\n    display: flex;\n    align-items: center;\n    column-gap: 5px;\n    padding-bottom: 8px;\n}\n\n#create-name, #update-name {\n    padding: 3px;\n    border-radius: 5px;\n}\n\n#create-color, #update-color {\n    height: 20px;\n}\n\n#create-color, #update-color {\n    border-radius: 5px;\n}\n\n.button {\n    width: 85px;\n    padding: 5px;\n    border-radius: 5px;\n    font-size: 10px;\n}\n\n.button:hover {\n    cursor: pointer;\n}\n\n#generate-cars {\n    width: 135px;\n}\n\n.title, .page {\n    padding-bottom: 15px;\n}\n\n.title {\n    font-size: 20px;\n}\n\n.pagination-container {\n    margin-top: 50px;\n}\n\n.winner-message {\n    position: absolute;\n    top: 50%; left: 35%;\n    margin: 0 auto;\n    z-index: 999;\n    text-align: center;\n    font-size: 40px;\n    font-weight: bold;\n    color: rgb(255, 175, 175);\n    text-shadow: 1px 1px 2px red, 0 0 1em blue, 0 0 0.2em blue;\n    background-color: black;\n    box-shadow: 0 0 0.4em olive, 0 0 .4em olive;\n    border-radius: 10px;\n}",""]);const a=i},575:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(645),i=t.n(r)()((function(e){return e[1]}));i.push([e.id,"#winners-content {\n    margin-top: 40px;\n}\n\n.table-winners {\n    display: inline-flex;;\n    flex-direction: column;\n    margin-bottom: 50px;\n}\n\n.header-table {\n    display: flex;\n    background-color: rgb(96, 149, 242);\n}\n\n.winner-cars-container {\n    display: inline-flex;\n    flex-direction: column;\n}\n\n#winner-car-content {\n    display: flex;\n}\n\n.header-number, .winner-number {\n    width: 70px;\n}\n\n.header-car, .winner-car {\n    width: 40px;\n    padding-right: 60px;\n}\n\n.header-name, .winner-name {\n    width: 150px;\n}\n\n.header-wins, .winner-wins {\n    width: 60px; \n}\n\n.winner-icon-car {\n    width: 40px;\n    height: 20px;\n}\n\n.header-best-time:hover, .header-wins:hover {\n    cursor: pointer;\n}",""]);const a=i},767:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(645),i=t.n(r)()((function(e){return e[1]}));i.push([e.id,"* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    border: 0;\n}\n\nhtml {\n  scroll-behavior: smooth;\n  font-size: 16px;\n}\n\nbody {\n    color: #fff;\n    background: #000;\n}\n\n#wrapper {\n    padding: 10px;\n}",""]);const a=i},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),n.push(c))}},n}},667:e=>{e.exports=function(e,n){return n||(n={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},379:(e,n,t)=>{var r,i=function(){var e={};return function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[n]=t}return e[n]}}(),a=[];function o(e){for(var n=-1,t=0;t<a.length;t++)if(a[t].identifier===e){n=t;break}return n}function s(e,n){for(var t={},r=[],i=0;i<e.length;i++){var s=e[i],c=n.base?s[0]+n.base:s[0],d=t[c]||0,u="".concat(c," ").concat(d);t[c]=d+1;var l=o(u),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==l?(a[l].references++,a[l].updater(h)):a.push({identifier:u,updater:v(h,n),references:1}),r.push(u)}return r}function c(e){var n=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=t.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){n.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(n);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}return n}var d,u=(d=[],function(e,n){return d[e]=n,d.filter(Boolean).join("\n")});function l(e,n,t,r){var i=t?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(n,i);else{var a=document.createTextNode(i),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(a,o[n]):e.appendChild(a)}}function h(e,n,t){var r=t.css,i=t.media,a=t.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function v(e,n){var t,r,i;if(n.singleton){var a=m++;t=p||(p=c(n)),r=l.bind(null,t,a,!1),i=l.bind(null,t,a,!0)}else t=c(n),r=h.bind(null,t,n),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else i()}}e.exports=function(e,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var t=s(e=e||[],n);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<t.length;r++){var i=o(t[r]);a[i].references--}for(var c=s(e,n),d=0;d<t.length;d++){var u=o(t[d]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}t=c}}}},3:(e,n,t)=>{e.exports=t.p+"assets/ab5dcb93c52e1d2c89c2.png"}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),(()=>{var e=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};const n=class{constructor(){this.baseUrl="http://127.0.0.1:3000",this.totalCount=0}typedFetch(n,t,r){return e(this,void 0,void 0,(function*(){try{const e=`${this.baseUrl}/${n}`,i=this.getRequestConfig(t,r),a=yield fetch(`${e}`,i);return yield a.json().then((e=>new Promise((n=>{n({totalCount:a.headers.get("X-Total-Count"),data:e})}))))}catch(e){console.log("error")}}))}getRequestConfig(e,n){const t={body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};switch(e){case"DELETE":return{method:"DELETE"};case"PATCH":return{method:"PATCH"};case"POST":return Object.assign({method:"POST"},t);case"PUT":return Object.assign({method:"PUT"},t);default:return{}}}getData(n){return e(this,void 0,void 0,(function*(){return yield this.typedFetch(n,"GET")}))}postData(n,t){return e(this,void 0,void 0,(function*(){return yield this.typedFetch(n,"POST",t)}))}putData(n,t){return e(this,void 0,void 0,(function*(){return yield this.typedFetch(n,"PUT",t)}))}patchData(n){return e(this,void 0,void 0,(function*(){return yield this.typedFetch(n,"PATCH")}))}deleteData(n){return e(this,void 0,void 0,(function*(){return yield this.typedFetch(n,"DELETE")}))}};var r=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};const i=class extends n{getCar(e){return r(this,void 0,void 0,(function*(){const n=`garage/${e}`,t=yield this.getData(n);if(t)return t.data}))}createCar(e,n){return r(this,void 0,void 0,(function*(){const t={name:e,color:n};yield this.postData("garage",t)}))}updateCar(e,n,t){return r(this,void 0,void 0,(function*(){const r=`garage/${e}`,i={name:n,color:t};yield this.putData(r,i)}))}getCars(e=1,n=7){return r(this,void 0,void 0,(function*(){const t=`garage?_page=${e}&_limit=${n}`;return this.getData(t)}))}deleteCar(e){return r(this,void 0,void 0,(function*(){const n=`garage/${e}`;yield this.deleteData(n)}))}};var a=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};const o=class extends n{start(e){return a(this,void 0,void 0,(function*(){const n=`engine?id=${e}&status=started`;return yield this.patchData(n)}))}stop(e){return a(this,void 0,void 0,(function*(){const n=`engine?id=${e}&status=stopped`;return yield this.patchData(n)}))}drive(e){return a(this,void 0,void 0,(function*(){const n=`engine?id=${e}&status=drive`,t=yield this.patchData(n);if(t)return t.data}))}};var s;!function(e){e.Body="body",e.NavigationTemp="#navigation-temp",e.GarageMenuTemp="#garage-menu-temp",e.ModelsList="#models-list",e.GarageContentTemp="#garage-content-temp",e.CarContentTemp="#car-content-temp",e.TotalCount="#total-count",e.GaragePage="#garage-page",e.GarageContent="#garage-content",e.CarsContainer=".cars-container",e.Wrapper="#wrapper",e.CarContent=".car-content",e.CarName=".car-name",e.IconUse=".icon-use",e.ToGarage="#to-garage",e.GarageMenu=".garage-menu",e.ToWinners="#to-winners",e.CreateButton="#create-button",e.CreateName="#create-name",e.CreateColor="#create-color",e.UpdateButton="#update-button",e.UpdateName="#update-name",e.UpdateColor="#update-color",e.Select=".select",e.UpdateContainer=".update-container",e.generateCars="#generate-cars",e.PrevButtonGarage="#garage-prev",e.NextButtonGarage="#garage-next",e.WinnersContentTemp="#winners-content-temp",e.WinnersPage="#winners-page",e.WinnersContent="#winners-content",e.Remove=".remove",e.IconCar=".icon-car",e.Start=".start",e.Stop=".stop",e.CarManage=".car-manage",e.IconContainer=".icon-container",e.Race="#race",e.Reset="#reset",e.WinnerCarContentTemp="#winner-car-content-temp",e.WinnerNumber=".winner-number",e.WinnerName=".winner-name",e.WinnerWins=".winner-wins",e.WinnerTime=".winner-time",e.WinnerCarsContainer=".winner-cars-container",e.WinnersCount="#winners-count",e.WinnersPrev="#winners-prev",e.WinnersNext="#winners-next",e.WinnerMessage=".winner-message",e.HeaderBestTime=".header-best-time",e.HeaderWins=".header-wins"}(s||(s={}));var c=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};var d=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};const u=class extends i{getWinner(e){return d(this,void 0,void 0,(function*(){const n=`winners/${e}`,t=yield this.getData(n);if(t)return t.data}))}createWinner(e,n,t){return d(this,void 0,void 0,(function*(){const r={id:e,wins:n,time:t};yield this.postData("winners",r)}))}updateWinner(e,n,t){return d(this,void 0,void 0,(function*(){const r=`winners/${e}`,i={id:e,wins:n,time:t};yield this.putData(r,i)}))}getWinners(e=1,n=10,t="time",r="ASC"){return d(this,void 0,void 0,(function*(){const i=`winners?_page=${e}&_limit=${n}&_sort=${t}&_order=${r}`;return this.getData(i)}))}deleteWinner(e){return d(this,void 0,void 0,(function*(){const n=`winners/${e}`;yield this.deleteData(n)}))}},l=class{constructor(e,n,t){this.name=n.name,this.color=n.color,this.id=n.id,this.wins=e.wins,this.time=e.time,this.number=t}renderWinnerCar(){const e=document.createDocumentFragment(),n=document.querySelector(s.WinnerCarContentTemp).content.cloneNode(!0);n.querySelector(s.WinnerNumber).innerHTML=`${this.number+1}`,n.querySelector(s.IconUse).style.fill=this.color,n.querySelector(s.WinnerName).innerHTML=`${this.name}`,n.querySelector(s.WinnerWins).innerHTML=`${this.wins}`,n.querySelector(s.WinnerTime).innerHTML=`${this.time}`,e.append(n),document.querySelector(s.WinnerCarsContainer).append(e)}};var h=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};const p=class{constructor(){this.totalCount=0,this.winnerCars=[],this.page=1,this.winnersOnPage=10,this.service=new u,this.sort="time",this.order="ASC"}init(){this.renderWinnersPage(),this.addPaginationListener()}getWinnerCars(){return h(this,void 0,void 0,(function*(){const e=yield this.service.getWinners(this.page,this.winnersOnPage,this.sort,this.order);if(null==e?void 0:e.data){this.winnerCars=[];for(let n=0;n<e.data.length;n+=1){const t=yield this.service.getCar(e.data[n].id);t&&this.winnerCars.push(new l(e.data[n],t,n))}}(null==e?void 0:e.totalCount)&&(this.totalCount=+e.totalCount)}))}renderWinnersPage(){this.renderWinnersContent(),this.renderWinnerCars(),this.addSortListener()}renderWinnersContent(){const e=document.createDocumentFragment(),n=document.querySelector(s.WinnersContentTemp).content.cloneNode(!0);n.querySelector(s.WinnersPage).innerHTML=`${this.page}`,e.append(n),document.querySelector(s.Wrapper).append(e)}renderWinnerCars(){return h(this,void 0,void 0,(function*(){yield this.getWinnerCars(),document.querySelector(s.WinnersCount).innerHTML=`${this.totalCount}`,document.querySelector(s.WinnerCarsContainer).innerHTML="",this.winnerCars.forEach((e=>{e.renderWinnerCar()})),this.checkDisabledPagination()}))}removeWinner(e){return h(this,void 0,void 0,(function*(){yield this.service.deleteWinner(e),this.renderWinnerCars()}))}checkDisabledPagination(){const e=document.querySelector(s.WinnersPrev),n=document.querySelector(s.WinnersNext);e.disabled=1===this.page,n.disabled=this.totalCount/this.winnersOnPage<=this.page}addPaginationListener(){const e=document.querySelectorAll(`${s.WinnersPrev}, ${s.WinnersNext}`),n=document.querySelector(s.WinnersPage);e.forEach((e=>{e.addEventListener("click",(e=>h(this,void 0,void 0,(function*(){"winners-prev"===e.target.id?this.page-=1:this.page+=1,n.innerHTML=`${this.page}`,document.querySelector(s.WinnerCarsContainer).innerHTML="",this.renderWinnerCars()}))))}))}addSortListener(){document.querySelector(s.HeaderBestTime).addEventListener("click",(()=>{this.sort="time",this.order="ASC"===this.order?"DESC":"ASC",this.renderWinnerCars()})),document.querySelector(s.HeaderWins).addEventListener("click",(()=>{this.sort="wins",this.order="ASC"===this.order?"DESC":"ASC",this.renderWinnerCars()}))}},m={Mazda:["CX-3","CX-5","CX-7","CX-9","CX-30","RX-8","626","323F","MX-3","MX-5","MX-7","MX-9"],Audi:["A1","A2","A3","A4","A5","A6","A7","A8","Q2","Q3","Q5","Q7","Q8"],BMW:["X1","X2","X3","X4","X5","X6","X7","iX","iX3","M2","M3","M4","M5","M6"],Mercedes:["CL","CLA","CLK","CLS","SLC","SLK","Vito","Viano","GLA","GLE","EQC"],Honda:["Accord","Civic","Concerto","CR-V","CR-X","CR-Z","Fit","FR-V","HR-V","Jazz"],Toyota:["Auris","Avalon","Avensis","CH-R","Camry","Carina","Corolla","Fortuner","Picnic","Tundra"],Lada:["2101","2102","2103","2104","2105","2106","2107","2108","2109","21099","2110"],Hyndai:["Accent","Coupe","Creta","Elantra","Genesis","H100","H200","i10","i20","i30","i40"],Nissan:["100NX","Almera","Armada","Cherry","Juke","Leaf","Maxima","Murano","Navara","Qashqai"],Skoda:["Citigo","Felicia","Octavia","Roomster","Fabia","Karoq","Praktik","Superb","Rapid","Yeti"]};var v=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))};var g=t(379),f=t.n(g),C=t(767);f()(C.Z,{insert:"head",singleton:!1}),C.Z.locals;var y=t(219);f()(y.Z,{insert:"head",singleton:!1}),y.Z.locals;var w=t(491);f()(w.Z,{insert:"head",singleton:!1}),w.Z.locals;var S=t(575);f()(S.Z,{insert:"head",singleton:!1}),S.Z.locals;const b=new class{constructor(){this.service=new i,this.totalCount=0,this.cars=[],this.page=1,this.carsOnPage=7,this.idCurrentCar=0,this.winners=new p}init(){this.renderPage(),this.addAllListeners()}getCars(){return v(this,void 0,void 0,(function*(){const e=yield this.service.getCars(this.page,this.carsOnPage);(null==e?void 0:e.data)&&(this.cars=[],e.data.forEach((e=>{this.cars.push(new class{constructor(e){this.service=new o,this.name=e.name,this.color=e.color,this.id=e.id}renderCar(){const e=document.createDocumentFragment(),n=document.querySelector(s.CarContentTemp).content.cloneNode(!0);n.querySelector(s.CarContent).id=`car${this.id}`,n.querySelector(s.Select).id=`select${this.id}`,n.querySelector(s.Remove).id=`remove${this.id}`,n.querySelector(s.CarName).innerHTML=this.name,n.querySelector(s.IconContainer).id=`icon${this.id}`,n.querySelector(s.IconUse).style.fill=this.color;const t=n.querySelector(s.Start);t.id=`start${this.id}`,t.addEventListener("click",(()=>{this.startCar()}));const r=n.querySelector(s.Stop);r.id=`stop${this.id}`,r.addEventListener("click",(()=>{this.stopCar()})),e.append(n),document.querySelector(s.CarsContainer).append(e)}startCar(){return c(this,void 0,void 0,(function*(){const e=document.querySelector(`#car${this.id}`),n=document.querySelector(`#icon${this.id}`),t=e.offsetWidth-n.offsetLeft-n.offsetWidth;this.startDisabled();const r=yield this.service.start(this.id);if(null==r?void 0:r.data){const e=r.data.distance/r.data.velocity;if(this.animatePosition(t,e),yield this.service.drive(this.id))return{id:this.id,name:this.name,time:+(e/1e3).toFixed(2)};clearInterval(this.intervalId)}}))}stopCar(){return c(this,void 0,void 0,(function*(){(yield this.service.stop(this.id))&&(this.stopDisabled(),clearInterval(this.intervalId),document.querySelector(`#icon${this.id}`).style.transform="translateX(0px)")}))}startDisabled(){const e=document.querySelector(`#stop${this.id}`),n=document.querySelector(`#start${this.id}`);e.disabled=!1,n.disabled=!0}stopDisabled(){const e=document.querySelector(`#stop${this.id}`),n=document.querySelector(`#start${this.id}`);e.disabled=!0,n.disabled=!1}animatePosition(e,n){return c(this,void 0,void 0,(function*(){const t=document.querySelector(`#icon${this.id}`);let r=0;const i=e/(n/1e3*60);this.intervalId=setInterval((()=>{r+=i,r>e&&clearInterval(this.intervalId),t.style.transform=`translateX(${r}px)`}),16)}))}}(e))}))),(null==e?void 0:e.totalCount)&&(this.totalCount=+e.totalCount)}))}renderPage(){const e=document.createElement("div");e.id=s.Wrapper.slice(1),document.querySelector(s.Body).append(e),this.renderNavigation(),this.renderGarageMenu(),this.renderGarageContent(),this.renderCars()}renderNavigation(){const e=document.createDocumentFragment(),n=document.querySelector(s.NavigationTemp).content.cloneNode(!0);e.append(n),document.querySelector(s.Wrapper).append(e)}renderGarageMenu(){const e=document.createDocumentFragment(),n=document.querySelector(s.GarageMenuTemp).content.cloneNode(!0),t=n.querySelector(s.ModelsList);for(const e in m)m[e].forEach((n=>{const r=document.createElement("option");r.value=`${e} ${n}`,null==t||t.append(r)}));e.append(n),document.querySelector(s.Wrapper).append(e)}renderGarageContent(){const e=document.createDocumentFragment(),n=document.querySelector(s.GarageContentTemp).content.cloneNode(!0);n.querySelector(s.GaragePage).innerHTML=`${this.page}`,e.append(n),document.querySelector(s.Wrapper).append(e)}renderCars(){return v(this,void 0,void 0,(function*(){yield this.getCars(),document.querySelector(s.TotalCount).innerHTML=`${this.totalCount}`,document.querySelector(s.CarsContainer).innerHTML="",this.cars.forEach((e=>{e.renderCar()})),this.checkDisabledPagination(),this.addSelectListener(),this.addRemoveListener();const e=document.querySelector(s.Reset),n=document.querySelector(s.Race);this.removeDisabled(n),this.addDisabled(e)}))}checkDisabledPagination(){const e=document.querySelector(s.PrevButtonGarage),n=document.querySelector(s.NextButtonGarage);e.disabled=1===this.page,n.disabled=this.totalCount/this.carsOnPage<=this.page}addAllListeners(){this.addCreateListener(),this.addUpdateListener(),this.addGenerateCarsListener(),this.addPaginationListener(),this.addRaceListener(),this.addResetListener(),this.addWrapperListener()}addNavigationListener(){const e=document.querySelector(s.ToGarage),n=document.querySelector(s.ToWinners),t=document.querySelector(s.GarageMenu),r=document.querySelector(s.GarageContent),i=document.querySelector(s.WinnersContent);e.addEventListener("click",(()=>{t.classList.remove("hidden-page"),r.classList.remove("hidden-page"),i.classList.add("hidden-page")})),n.addEventListener("click",(()=>{t.classList.add("hidden-page"),r.classList.add("hidden-page"),i.classList.remove("hidden-page")}))}addCreateListener(){document.querySelector(s.CreateButton).addEventListener("click",(()=>v(this,void 0,void 0,(function*(){const e=document.querySelector(s.CreateName),n=e.value,t=document.querySelector(s.CreateColor).value;yield this.service.createCar(n,t),e.value="",this.renderCars()}))))}addGenerateCarsListener(){document.querySelector(s.generateCars).addEventListener("click",this.generateCars.bind(this))}addPaginationListener(){const e=document.querySelectorAll(`${s.PrevButtonGarage}, ${s.NextButtonGarage}`),n=document.querySelector(s.GaragePage);e.forEach((e=>{e.addEventListener("click",(e=>v(this,void 0,void 0,(function*(){"garage-prev"===e.target.id?this.page-=1:this.page+=1,n.innerHTML=`${this.page}`,document.querySelector(s.CarsContainer).innerHTML="",this.renderCars()}))))}))}addRaceListener(){const e=document.querySelector(s.Race),n=document.querySelector(s.WinnerMessage);e.addEventListener("click",(()=>{let t=null;this.addDisabled(e);const r=document.querySelector(s.Reset);this.removeDisabled(r),this.cars.forEach((e=>v(this,void 0,void 0,(function*(){const r=yield e.startCar();!t&&r&&(t=r,n.innerHTML=`${r.name} went first (${r.time} s)`,n.classList.remove("hidden-page"),this.writeWinner(t))}))))}))}writeWinner(e){return v(this,void 0,void 0,(function*(){const n=yield this.winners.service.getWinner(e.id);if(null==n?void 0:n.time){const t=Math.min(e.time,n.time);this.winners.service.updateWinner(n.id,n.wins+1,t)}else this.winners.service.createWinner(e.id,1,e.time);this.winners.renderWinnerCars()}))}addResetListener(){const e=document.querySelector(s.Reset),n=document.querySelector(s.Race);e.addEventListener("click",(()=>{this.removeDisabled(n),this.addDisabled(e),this.cars.forEach((e=>{e.stopCar()}))}))}addWrapperListener(){const e=document.querySelector(s.Wrapper),n=document.querySelector(s.WinnerMessage);e.addEventListener("click",(()=>{n.classList.add("hidden-page")}))}generateCars(){return v(this,void 0,void 0,(function*(){const e=Object.keys(m);for(let n=0;n<100;n+=1){const n=this.generateName(e),t=this.generateColor();yield this.service.createCar(n,t)}document.querySelector(s.CarsContainer).innerHTML="",this.renderCars()}))}getRandomInteger(e,n){return Math.floor(Math.random()*(n-e+1))+e}generateName(e){const n=e[this.getRandomInteger(1,+e.length)-1],t=m[n];return`${n} ${t[this.getRandomInteger(1,+t.length)-1]}`}generateColor(){let e="#";for(let n=0;n<6;n+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}addSelectListener(){document.querySelectorAll(s.Select).forEach((e=>{e.addEventListener("click",(()=>{this.selectCar(e)}))}))}addRemoveListener(){document.querySelectorAll(s.Remove).forEach((e=>{e.addEventListener("click",(()=>{this.idCurrentCar=+e.id.slice(6),this.removeCar(this.idCurrentCar),this.winners.removeWinner(this.idCurrentCar)}))}))}selectCar(e){this.idCurrentCar=+e.id.slice(6);const n=document.querySelector(s.UpdateName),t=document.querySelector(s.UpdateColor),r=document.querySelector(s.UpdateButton);this.removeDisabled(n,t,r)}removeCar(e){return v(this,void 0,void 0,(function*(){yield this.service.deleteCar(e),document.querySelector(s.CarsContainer).innerHTML="",this.renderCars()}))}removeDisabled(...e){e.forEach((e=>{e.disabled=!1}))}addDisabled(...e){e.forEach((e=>{e.disabled=!0}))}addUpdateListener(){document.querySelector(s.UpdateButton).addEventListener("click",(()=>v(this,void 0,void 0,(function*(){const e=document.querySelector(s.UpdateName),n=e.value,t=document.querySelector(s.UpdateColor),r=t.value;yield this.service.updateCar(this.idCurrentCar,n,r),e.value="";const i=document.querySelector(s.UpdateButton);this.addDisabled(e,t,i),this.renderCars()}))))}},x=new p;var q,L,W,T;q=void 0,L=void 0,T=function*(){b.init(),x.init(),b.addNavigationListener()},new((W=void 0)||(W=Promise))((function(e,n){function t(e){try{i(T.next(e))}catch(e){n(e)}}function r(e){try{i(T.throw(e))}catch(e){n(e)}}function i(n){var i;n.done?e(n.value):(i=n.value,i instanceof W?i:new W((function(e){e(i)}))).then(t,r)}i((T=T.apply(q,L||[])).next())}))})()})();